<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <title>RAYCOIN Wallet</title>
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <style>
   body { font-family: sans-serif; padding: 20px; background: #111; color: #0f0; }
   input, button, textarea { margin: 5px 0; width: 100%; font-size: 1rem; }
   .section { border: 1px solid #0f0; padding: 10px; margin: 10px 0; }
   h2 { border-bottom: 1px solid #0f0; }
 </style>
</head>
<body>

 <h1>üí∞ RAYCOIN Wallet</h1>

 <div class="section">
   <h2>Your Wallet</h2>
   <p><strong>Address:</strong></p>
   <textarea id="address" readonly></textarea>
   <p><strong>Private Key:</strong></p>
   <textarea id="privKey" readonly></textarea>
   <button onclick="createWallet()">üîê Generate New Wallet</button>
 </div>

 <div class="section">
   <h2>Balance</h2>
   <p id="balance">Loading...</p>
 </div>

 <div class="section">
   <h2>Send RAYCOIN</h2>
   <input type="text" id="to" placeholder="Recipient address">
   <input type="number" id="amount" placeholder="Amount to send">
   <button onclick="sendTx()">üöÄ Send</button>
 </div>

 <div class="section">
   <h2>Mine Block</h2>
   <button onclick="mineBlock()">‚õèÔ∏è Mine</button>
   <p id="mineStatus"></p>
 </div>

 <div class="section">
   <h2>Blockchain</h2>
   <pre id="chainView"></pre>
 </div>

<!-- === wallet.js === -->
<script>
function generateKeyPair() {
  return {
    address: 'RAY_' + Math.random().toString(36).substr(2),
    privateKey: Math.random().toString(36).substr(2)
  };
}
function createWallet() {
  const keys = generateKeyPair();
  localStorage.setItem('ray_wallet', JSON.stringify(keys));
  document.getElementById('address').value = keys.address;
  document.getElementById('privKey').value = keys.privateKey;
  updateBalance();
}
function loadWallet() {
  const stored = localStorage.getItem('ray_wallet');
  if (stored) {
    const { address, privateKey } = JSON.parse(stored);
    document.getElementById('address').value = address;
    document.getElementById('privKey').value = privateKey;
  }
}
</script>

<!-- === blockchain.js === -->
<script>
let chain = JSON.parse(localStorage.getItem('ray_chain')) || [];

function getBalance(addr) {
  return chain.reduce((sum, block) => {
    block.transactions.forEach(tx => {
      if (tx.to === addr) sum += tx.amount;
      if (tx.from === addr) sum -= tx.amount;
    });
    return sum;
  }, 0);
}

function sendTx() {
  const from = document.getElementById('address').value;
  const to = document.getElementById('to').value;
  const amount = parseFloat(document.getElementById('amount').value);
  if (!from || !to || isNaN(amount)) return;

  const block = {
    timestamp: Date.now(),
    transactions: [{ from, to, amount }],
    hash: Math.random().toString(36).substr(2)
  };
  chain.push(block);
  saveChain();
  updateBalance();
  renderChain();
}

function mineBlock() {
  const addr = document.getElementById('address').value;
  const block = {
    timestamp: Date.now(),
    transactions: [{ from: 'system', to: addr, amount: 50 }],
    hash: Math.random().toString(36).substr(2)
  };
  chain.push(block);
  saveChain();
  document.getElementById('mineStatus').textContent = 'Block mined!';
  updateBalance();
  renderChain();
}

function saveChain() {
  localStorage.setItem('ray_chain', JSON.stringify(chain));
}
</script>

<!-- === storage.js === -->
<script>
function updateBalance() {
  const addr = document.getElementById('address').value;
  if (!addr) return;
  const balance = getBalance(addr);
  document.getElementById('balance').textContent = balance + ' RAY';
}
</script>

<!-- === ui.js === -->
<script>
function renderChain() {
  let html = '';
  chain.forEach((block, i) => {
    html += `Block ${i} [${new Date(block.timestamp).toLocaleString()}]\n`;
    block.transactions.forEach(tx => {
      html += `  ${tx.from} ‚û°Ô∏è ${tx.to} : ${tx.amount}\n`;
    });
    html += `  Hash: ${block.hash}\n\n`;
  });
  document.getElementById('chainView').textContent = html;
}
loadWallet();
updateBalance();
renderChain();
</script>

</body>
</html>
